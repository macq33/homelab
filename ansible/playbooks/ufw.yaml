- name: ufw
  hosts: all
  become: yes
  tasks:
    - name: ufw-enabled
      community.general.ufw:
        state: "enabled"
        policy: "deny"
        logging: "on"

    - name: ufw-rules
      community.general.ufw:
        rule: "allow"
        port: {{ item }}
        proto: "tcp"
        with_items:
          - "22"
          - "80"
          - "443"
